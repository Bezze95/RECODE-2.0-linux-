<!DOCTYPE html>
<html>

<head>
    <script src="jsPsych/jspsych.js"></script>
    <script src="jsPsych/plugins/jspsych-free-sort.js"></script>
    <script src="jsPsych/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jsPsych/plugins/jspsych-html-button-response.js"></script>
    <link rel="stylesheet" href="jsPsych/css/jspsych.css"></link>
    <script src="/assets/javascripts/jatos.js"></script>

  <style>
  body {
    background-color: white;
    }
  </style>

</head>

<body>
	<script type='text/javascript'>

 let value = Math.floor(Math.random() * 20);
 let target = Math.floor(Math.random() * 3);
 let notarget1 = Math.floor(Math.random() * 20);
 let notarget2  = Math.floor(Math.random() * 20);

 if (target == 0) {
          var img = {
              type: 'html-button-response',
              stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="ragionamento/somma/somma_'+String(value)+'.png" height="400"> </p>',
              choices: jsPsych.NO_KEYS,
              choices:["", "", ""],
              prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
              button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>',
                          '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                          '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>']
          };
        }
if (target == 1) {
         var img = {
             type: 'html-button-response',
             stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="ragionamento/somma/somma_'+String(value)+'.png" height="400"> </p>',
             choices: jsPsych.NO_KEYS,
             choices:["", "", ""],
             prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
             button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                         '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>',
                         '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>']
         };
       }
 if (target == 2) {
          var img = {
              type: 'html-button-response',
              stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="ragionamento/somma/somma_'+String(value)+'.png" height="400"> </p>',
              choices: jsPsych.NO_KEYS,
              choices:["", "", ""],
              prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
              button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                          '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>',
                          '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(ragionamento/somma/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>']
          };
        }

jatos.onLoad(function() {
    jsPsych.init({
        timeline: [img],
        on_finish: function() {
          var feed = 0;
          jatos.studySessionData = feed;
          if (jsPsych.data.get().values()[0]["button_pressed"] == target) {feed = 1} else {feed = 0};
          jatos.studySessionData = feed;
          var ragionamento = Number(sessionStorage.getItem('ragionamento'))+feed;
          sessionStorage.setItem('ragionamento', ragionamento);
          var data = {feed: feed, type: 'somma', cresp: feed};
          jatos.startComponentByPos(4, data, JSON.stringify(data));



    }
  });
});

    </script>
</html>
