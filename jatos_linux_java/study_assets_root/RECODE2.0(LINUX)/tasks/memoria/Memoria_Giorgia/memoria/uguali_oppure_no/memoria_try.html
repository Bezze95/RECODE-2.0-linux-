<!doctype html>
<html lang="en">

<head>
  <title>Riconoscimento 4AFC</title>
  <meta charset="UTF-8">

  <script src="https://unpkg.com/jspsych@7.2.3"></script>
  <script src="./jspsych-psychophysics-3.3.0/jspsych-psychophysics.js"></script> <!---: scegliere se usare o no -->
  <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.1"></script>
  <script src="https://unpkg.com/@jspsych/plugin-preload@1.1.1"></script>
  <script src="https://unpkg.com/@jspsych/plugin-image-keyboard-response@1.1.1"></script>
  <script src="https://unpkg.com/@jspsych/plugin-survey-multi-choice@1.1.1"></script>



 

  <link href="https://unpkg.com/jspsych@7.2.3/css/jspsych.css" rel="stylesheet" type="text/css" />
  <script src="jatos.js"></script>
  <!-- <script src="https://smtpjs.com/v3/smtp.js"></script> -->


  <style>
  body {
    background-color: white;
    }
  </style>

</head>

<body>
	<script type='text/javascript'>
    jatos.onload(function(){
      var progress = Math.round((1/jatos.study.Length)*jatos.componentPos*100,0);
      var progressText="avanzamento" + progress + "%";
      const updateProgress = progress;
    }); 
        
    var jsPsych = initJsPsych({
      use_webaudio: false,
      on_finish: function() {
        jsPsych.data.displayData();

                                /*
                var correct_trials = jsPsych.data.get().filter({visualcorrect: true}).count();
                    if(correct_trials > 10){
                        var feed = 1;
                    } else {
                        var feed = 0;
                    }
                jatos.studySessionData = feed;
                var attenzione = Number(sessionStorage.getItem('attenzione'))+feed;
                sessionStorage.setItem('attenzione', attenzione);
                var Data = {feed: feed, type: 'GoNoGoCards', cresp: correct_trials};
                jatos.startComponentByPos(4,Data); 
            } */
      }
    });



    var preload_img = {
      type: jsPsychPreload,
      images: ["./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/1.png", "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/2.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/3.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/4.png",
      "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/5.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/6.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/7.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/8.png",
      "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/9.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/10.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/11.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/12.png",
      "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/13.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/14.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/15.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/16.png",
      "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/17.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/18.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/19.png","./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/20.png",
      "./tasks/memoria/Memoria_Giorgia/memoria/uguali_oppure_no/immagini/21.png"],

    };

    var instructions = {
      type: jsPsychHtmlButtonResponse,
      stimulus: "<p style='font-size:30px;'><strong>Istruzioni</strong></p>"+
        "<p style='font-size:30px;'> Sullo schermo comparirà un’immagine che lei dovrà guardare attentamente e memorizzare. </p>"+
        "<p style='font-size:30px;'>Successivamente le verranno mostrate 5 alternative </p>"+
        "<p style='font-size:30px;'>fra queste, cliccando i tasti 1, 2, 3, 4 o 5 della tastiera, dovrà indicare quale corrisponde a quella vista precedentemente.</p>",
      button_html: '<button class="jspsych-btn" style="font-size:20px; color:black;">%choice%</button>',
      choices: ['Prema qui per continuare'],

    };

    var img1 = [
      {image1: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine1.png">', correct: true},
      {image2: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine2.png">', correct: false},
      {image3: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine3.png">', correct: false},
      {image4: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine4.png">', correct: false},
      {image5: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine5.png">', correct: false},
    ];

    var img2 = [
      {image6: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine6.png">', correct: true},
      {image7: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine7.png">', correct: false},
      {image8: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine8.png">', correct: false},
      {image9: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine9.png">', correct: false},
      {image10: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine10.png">', correct: false},
    ];

    var img3 = [
      {image11: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine11.png">', correct: true},
      {image12: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine12.png">', correct: false},
      {image13: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine13.png">', correct: false},
      {image14: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine14.png">', correct: false},
      {image15: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine15.png">', correct: false},
    ];

    var img4 = [
      {image16: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine16.png">', correct: true},
      {image17: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine17.png">', correct: false},
      {image18: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine18.png">', correct: false},
      {image19: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine19.png">', correct: false},
      {image20: '<img src="./tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine20.png">', correct: false},
      
    ];

    var trial1 = {
      type: jsPsychImageKeyboardResponse,
      stimulus: './tasks/attenzione/ricerca_visiva/ricerca_visiva/immagine1.png',
      choices: "NO_KEYS",
      trial_duration: 5000
    };

    var trial_choices1 = {
      type: jsPsychSurveyMultiChoice, 
      questions: [
        {
          prompt: "Quale delle seguenti immagini corrisponde a quella vista precedentemente?",
          name: 'trial1',
          options: jsPsych.timeliveVariable(variables1),
          required: true,
          horizontal: true
        }
      ],
      // -----> bisognerebbe andare a recuperare dalle risposte lo ordine delle varie opzioni e associare quelle corrette 
      /*on_finish: function(data){ 

      }*/
    };


    var node = {
      timeline: [trial1, trial_choices1],
      timeline_variables: [
        {variables1: jsPsych.randomization.sampleWithoutReplacement(img1, 5)},
        {variables2: jsPsych.randomization.sampleWithoutReplacement(img2, 5)},
        {variables3: jsPsych.randomization.sampleWithoutReplacement(img3, 5)},
        {variables4: jsPsych.randomization.sampleWithoutReplacement(img4, 5)}
      ]
    };





    var timeline = [];

    jsPsych.run(timeline)
  </script>

</html>
