<!DOCTYPE html>
<html>

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Operazioni LIV.1</title>


  <script src="./jspsych7.2.3/dist/jspsych.js"></script>

  <script src="./jspsych7.2.3/dist/plugin-free-sort.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-html-keyboard-response.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-html-button-response.js"></script>

  <link href="./jspsych7.2.3/dist/jspsych.css" rel="stylesheet" type="text/css" />
  <script src="jatos.js"></script>

  <style>
    body {
      background-color: white;
      }
  </style>

</head>

<body>
	<script type='text/javascript'>
    jatos.onLoad(function() {
      var progress = Math.round((1/jatos.study.Length)*jatos.componentPos*100,0);
      var progressText="avanzamento" + progress + "%";
      const updateProgress = progress;
    }); 

    var jsPsych = initJsPsych({
      on_finish: function() {
        jsPsych.data.displayData();

        /*var correct_trials = jsPsych.data.get().filter({correct: true}).count();
        if(correct_trials > 0){
          var feed = 1;
        } else {
          var feed = 0;
        }
        jatos.studySessionData = feed;
        var mem_lavoro = Number(sessionStorage.getItem('mem_lavoro'))+feed;
        sessionStorage.setItem('mem_lavoro', mem_lavoro);
        var Data = {feed: feed, type: 'MEM_LAVORO_operazioni_level1', cresp: correct_trials};
        jatos.startComponentByPos(4,Data, JSON.stringify(Data)); /*PER FAR COMPARIRE FEEDBACK in base a posizione file su jatos */
      }
    });
  

    let value = Math.floor(Math.random() * 20);
    let target = Math.floor(Math.random() * 3);
    let notarget1 = Math.floor(Math.random() * 20);
    let notarget2  = Math.floor(Math.random() * 20);

    if (target == 0) {
              var img = {
                  type: jsPsychHtmlButtonResponse,
                  stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="./TASKS/MEMORIA_LAVORO/operazioni/img/somma_'+String(value)+'.png" height="400"> </p>',
                  choices: "NO_KEYS",
                  choices:["", "", ""],
                  prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
                  button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>',
                              '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                              '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>']
              };
            }
    if (target == 1) {
            var img = {
                type: jsPsychHtmlButtonResponse,
                stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="./TASKS/MEMORIA_LAVORO/operazioni/img/somma_'+String(value)+'.png" height="400"> </p>',
                choices: "NO_KEYS",
                choices:["", "", ""],
                prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
                button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                            '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>',
                            '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>']
            };
          }
    if (target == 2) {
              var img = {
                  type: jsPsychHtmlButtonResponse,
                  stimulus: '<p style="font-size: 24px; font-weight: bold;"> Sullo schermo compariranno due griglie con dei quadratini colorati: </p><p style="font-size: 24px; font-weight: bold;">  ciò che deve fare è sommare i quadratini colorati e indicare la risposta corretta.</p> <img src="./TASKS/MEMORIA_LAVORO/operazioni/img/somma_'+String(value)+'.png" height="400"> </p>',
                  choices: "NO_KEYS",
                  choices:["", "", ""],
                  prompt:'Premi sulla figura che corrisponde alla somma delle due figure in alto',
                  button_html:['<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: red; color: red; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget1)+'.png); background-size: 100px;">%choice%</button>',
                              '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: green; color: green; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(notarget2)+'.png); background-size: 100px;">%choice%</button>',
                              '<button class="jspsych-btn" style = "height:110px; width:110px; border:5px solid; border-color: blue; color: blue; font-size : 24px; background: url(TASKS/MEMORIA_LAVORO/operazioni/img/Risultato_'+String(value)+'.png); background-size: 100px;">%choice%</button>']
              };
            }


    var timeline = [img];
  
    jsPsych.run(timeline)

    </script>
</html>
