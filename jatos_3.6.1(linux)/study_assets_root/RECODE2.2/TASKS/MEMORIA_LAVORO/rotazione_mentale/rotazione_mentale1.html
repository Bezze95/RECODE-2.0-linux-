<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MEMORIA DI LAVORO Rotazione Mentale LIV.1 </title>


  <script src="./jspsych7.2.3/dist/jspsych.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-html-button-response.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-survey-multi-choice.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-preload.js"></script>

  <link href="./jspsych7.2.3/dist/jspsych.css" rel="stylesheet" type="text/css" />
  <script src="jatos.js"></script>

  <script src="https://smtpjs.com/v3/smtp.js"></script>

</head>
<body>
    
</body>
<script>
    jatos.onload(function(){
        var progress = Math.round((1/jatos.study.Length)*jatos.componentPos*100,0);
        var progressText="avanzamento" + progress + "%";
        const updateProgress = progress;
      }); 
      
    var jsPsych = initJsPsych({
        use_webaudio: false,
        on_finish: function() {
            /*jsPsych.data.displayData();*/
      
            var correct_trials = jsPsych.data.get().filter({correct: true}).count();
                if(correct_trials > 0){
                    var feed = 1;
                } else {
                    var feed = 0;
                }
            jatos.studySessionData = feed;
            var memoria_lavoro = Number(sessionStorage.getItem('memoria_lavoro'))+feed;
            sessionStorage.setItem('memoria_lavoro', memoria_lavoro);
            var Data = {feed: feed, type: 'MEMORIA_LAVORO_rotazione_mentale_level1', cresp: correct_trials};
            jatos.startComponentByPos(4,Data); //PER FAR COMPARIRE FEEDBACK in base a posizione file su jatos */
        } 
    });

    var preload = {
        type: jsPsychPreload,
        images: [
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_0.jpg', './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_0.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_0.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_0.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_0.jpg', './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_0_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_0_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_0_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_0_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_0_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_50.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_50.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_50.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_50.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_50.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_50_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_50_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_50_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_50_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_50_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_100_R.jpg', './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_100_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_100_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_100_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_100_R.jpg', './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_100.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_100.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_100.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_100.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_100.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_150_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_150_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_150_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_150_R.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_150_R.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_150.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_150.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_150.jpg',
            './TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_150.jpg','./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_150.jpg'
        ]
    }; 


    var x1 = [2,3,4,5];
    let array1 = jsPsych.randomization.shuffle(x1);

    var x2 = [1,3,4,5];
    let array2 = jsPsych.randomization.shuffle(x2);

    var x3 = [1,2,4,5];
    let array3 = jsPsych.randomization.shuffle(x3);

    var x4 = [1,2,3,5];
    let array4 = jsPsych.randomization.shuffle(x4);

    var x5 = [1,2,3,4];
    let array5 = jsPsych.randomization.shuffle(x5);

    var x_num = ["_0","_50","_100", "_150"];
    let array_num = jsPsych.randomization.shuffle(x_num);

    var x_R = ["_R", ""];
    let array_R = jsPsych.randomization.shuffle(x_R);

    var instructions = {
        type: jsPsychHtmlButtonResponse,
        stimulus:`<p style="font-size: 24px; font-weight: bold;"> Ora le verrà presentata un'immagine. Le verranno poi date delle opzioni e lei dovrà indicare quali di queste rappresentino l'immagine presentata, ruotata nello spazio
        </p>`,
        button_html: `<button class="jspsych-btn" style="position: left; font-size: 20px; color:black;">%choice%</button>`,
        choices: ['Prema qui per fare una prova', 'Prema qui per procedere al compito'],
    };

    var prova = {
        type: jsPsychSurveyMultiChoice,
        questions:[
            {
                prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/rotationA_1.png" alt="RotazioneMentale_prova"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
                name: 'RotazioneMentale_prova', 
                options: [ // da decidere quante opzioni mettere 
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/rotationB_1.png" >',
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/rotationA_2.png" alt = "corretta" >',
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/rotationC_2.png" >'
                    
                ], 
                required: true,
                randomize_question_order: true,
                horizontal: true
            }
        ],
        on_finish: function(data){
          if(data.response.Q0 == {RotazioneMentale_prova: 'B <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/rotationA_2.png" alt = "corretta" >'}){
            console.log("corretto") <!---: non capisco perche non me lo conti come giusto -->
          }
        }
    };

    var conditional_node = {};

    var instructions1 = {
        type: jsPsychHtmlButtonResponse,
        stimulus:`<p style="font-size: 24px; font-weight: bold;"> Ora le verrà presentata un'immagine. Le verranno poi date delle opzioni e lei dovrà indicare quali di queste rappresentino l'immagine presentata, ruotata nello spazio
        </p>`,
        button_html: `<button class="jspsych-btn" style="position: left; font-size: 20px; color:black;">%choice%</button>`,
        choices: ['Prema qui per fare una prova', 'Prema qui per procedere al compito'],
    };

    var loop_condition = {};

    var trial1 = {
        type: jsPsychSurveyMultiChoice,
        questions:[
            {
                prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1_0.jpg" alt="RotazioneMentale1"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
                name: 'RotazioneMentale1', 
                options: [ // da decidere quante opzioni mettere 
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array1[0]+''+array_num[0]+''+array_R[0]+'.jpg">' ,
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1'+array_num[0]+''+array_R[0]+'.jpg" alt = "corretta">',
                    '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array1[0]+''+array_num[0]+''+array_R[0]+'.jpg">'
                ], 
                /*required: true,*/
                randomize_question_order: true,
                horizontal: true
            }
        ],
        on_finish: function(data){
            if (data.response.RotazioneMentale1 = '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/1'+array_num[0]+''+array_R[0]+'.jpg" alt = "corretta" >'){
                console.log("Corretto")

            } else {
                console.log("Sbagliato")
            }
        }
    };

    var trial2 = {
        type: jsPsychSurveyMultiChoice,
        questions:[
        {
            prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2_0.jpg" alt="RotazioneMentale2"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
            name: 'RotazioneMentale2', 
            options: [ // da decidere quante opzioni mettere 
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array2[1]+''+array_num[1]+''+array_R[1]+'.jpg" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/2'+array_num[1]+''+array_R[1]+'.jpg" alt = "corretta" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array2[1]+''+array_num[1]+''+array_R[1]+'.jpg" >'
                
            ], 
            required: true,
            randomize_question_order: true,
            horizontal: true
        }
        ]
    };

    var trial3 = {
        type: jsPsychSurveyMultiChoice,
        questions:[
        {
            prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3_0.jpg" alt="RotazioneMentale3"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
            name: 'RotazioneMentale3', 
            options: [ // da decidere quante opzioni mettere 
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array3[2]+''+array_num[2]+''+array_R[1]+'.jpg" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/3'+array_num[2]+''+array_R[0]+'.jpg" alt = "corretta" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array3[2]+''+array_num[2]+''+array_R[0]+'.jpg" >'
                
            ], 
            required: true,
            randomize_question_order: true,
            horizontal: true
        }
        ]
    };

    var trial4 = {
        type: jsPsychSurveyMultiChoice,
        questions:[
        {
            prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4_0.jpg" alt="RotazioneMentale4"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
            name: 'RotazioneMentale4', 
            options: [ // da decidere quante opzioni mettere 
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array4[3]+''+array_num[3]+''+array_R[0]+'.jpg" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/4'+array_num[3]+''+array_R[1]+'.jpg" alt = "corretta" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array4[3]+''+array_num[3]+''+array_R[1]+'.jpg" >'
                
            ], 
            required: true,
            randomize_question_order: true,
            horizontal: true
        }
        ]
    };

    var trial5 = {
        type: jsPsychSurveyMultiChoice,
        questions:[ 
        {
            prompt: '<p text-align= "center;"> Rispetto a questa immagine </p> <img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5_0.jpg" alt="RotazioneMentale5"> <p text-align= "center;">quale delle seguenti opzioni la rappresenta ruotata?</p>', 
            name: 'RotazioneMentale5', 
            options: [ // da decidere quante opzioni mettere 
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array5[3]+''+array_num[0]+''+array_R[1]+'.jpg" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/5'+array_num[2]+''+array_R[0]+'.jpg" alt = "corretta" >',
                '<img src="./TASKS/MEMORIA_LAVORO/rotazione_mentale/img/img1/'+array5[1]+''+array_num[2]+''+array_R[0]+'.jpg" >'
                
            ], 
            required: true,
            randomize_question_order: true,
            horizontal: true
        }
        
        ]
    };



    var timeline = [instructions, prova, instructions1, trial1, trial2, trial3, trial4, trial5];

jsPsych.run(timeline)
     
</script>
</html>