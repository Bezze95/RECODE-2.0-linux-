<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GONOGO CARDS LIV.1 </title>

  <script src="./jspsych7.2.3/dist/jspsych.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-survey-html-form.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-html-keyboard-response.js"></script>
  <script src="./jspsych7.2.3/dist/plugin-html-button-response.js"></script>
  <script src="./jspsych-psychophysics-3.3.0/jspsych-psychophysics.js"></script>

  <link href="./jspsych7.2.3/dist/jspsych.css" rel="stylesheet" type="text/css" />
  <script src="jatos.js"></script>

</head>
<body></body>
<script>

  jatos.onload(function(){
    var progress = Math.round((1/jatos.study.Length)*jatos.componentPos*100,0);
    var progressText="avanzamento" + progress + "%";
    const updateProgress = progress;
  }); 

  var jsPsych = initJsPsych({
    use_webaudio: false,
    on_finish: function() {
        /*jsPsych.data.displayData();*/

        var correct_trials = jsPsych.data.get().filter({correct: true}).count();
            if(correct_trials > 0){
                var feed = 1;
            } else {
                var feed = 0;
            }
        jatos.studySessionData = feed;
        var funzioni_esecutive = Number(sessionStorage.getItem('funzioni_esecutive'))+feed;
        sessionStorage.setItem('funzioni_esecutive', funzioni_esecutive);
        var Data = {feed: feed, type: 'FUNZIONI_ESECUTIVE_gonogostars_level1', cresp: correct_trials};
        jatos.startComponentByPos(4,Data); /*PER FAR COMPARIRE FEEDBACK in base a posizione file su jatos */
    } 
  });


  var cresp = 0;

  var stars = ["\u{1F7C6}", "\u{1F7CA}", "\u{1F7CC}"];
  var go = ["\u{1F7C6}", "\u{1F7C6}", "\u{1F7C6}", "\u{1F7CA}", "\u{1F7CC}"];
  var nogo = ["\u{1F7C6}", "\u{1F7C6}", "\u{1F7C6}", "\u{1F7CA}", "\u{1F7CA}"];

  function shuffle(s) {
    s.sort(function() {
      return 0.5 - Math.random();
    });
    s = String(s.join(''));
    return s;
  }

  var go_1 = shuffle(go);
  var go_2 = shuffle(go);
  var go_3 = shuffle(go);
  var go_4 = shuffle(go);
  var go_5 = shuffle(go);
  var go_6 = shuffle(go);
  var go_7 = shuffle(go);
  var go_8 = shuffle(go);
  var go_9 = shuffle(go);
  var go_10 = shuffle(go);

  var nogo_1 = shuffle(nogo);
  var nogo_2 = shuffle(nogo);
  var nogo_3 = shuffle(nogo);
  var nogo_4 = shuffle(nogo);
  var nogo_5 = shuffle(nogo);
  var nogo_6 = shuffle(nogo);
  var nogo_7 = shuffle(nogo);
  var nogo_8 = shuffle(nogo);
  var nogo_9 = shuffle(nogo);
  var nogo_10 = shuffle(nogo);

  var pre_if = {};
  
  var prova_loop = {};

  var feedback = {};

  var begin_trial = {};

  //trials

  var if_node = {};

  var begin_loop = {};

  var end_loop_prova = {};

  var trial_timeline = {
    timeline: []
  };

  var loop_prova = {};



   var timeline = [pre_if, if_node];

jsPsych.run(timeline)

</script>

</html>
